<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/game-css.css">
    <link rel="stylesheet" href="/css/table.css">
    <link rel="stylesheet" href="/css/schiessen.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <title>Schlauchboot Versenken Game</title>
</head>
<body class="bg-img">
    <!--TABLE-->
    <div class="player1-container position-absolute top-50 start-0 translate-middle-y">
        <div class="boot-container">
            <h2 class="player-text">Player 1</h2>
            <div class="boot-group">
                <div class="boot1">
                    <img class="draggable-boat" id="b1" src="/img/new_ship_horizontal/ship-1-blue.png" alt="boot-1-blau" draggable="true" ondragstart="allowDrag(event)">
                </div>
                <div class="boot2" id="boat2Container">
                    <img class="draggable-boat" src="/img/new_ship_horizontal/ship-2-blue-p1.png" alt="boot-2-blau"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" src="/img/new_ship_horizontal/ship-2-blue-p2.png" alt="boot-2-blau"  draggable="true" ondragstart="allowDrag(event)">
                </div>
                
                <div class="boot3">
                    <img class="draggable-boat" id="b3" src="/img/new_ship_horizontal/ship-3-blue-p1.png" alt="boot-3-blau"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="b3" src="/img/new_ship_horizontal/ship-3-blue-p2.png" alt="boot-3-blau"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="b3" src="/img/new_ship_horizontal/ship-3-blue-p3.png" alt="boot-3-blau"  draggable="true" ondragstart="allowDrag(event)">
                </div>
                <div class="boot4">
                    <img class="draggable-boat" id="b4" src="/img/new_ship_horizontal/ship-4-blue-p1.png" alt="boot-4-blau"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="b4" src="/img/new_ship_horizontal/ship-4-blue-p2.png" alt="boot-4-blau"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="b4" src="/img/new_ship_horizontal/ship-4-blue-p3.png" alt="boot-4-blau"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="b4" src="/img/new_ship_horizontal/ship-4-blue-p4.png" alt="boot-4-blau"  draggable="true" ondragstart="allowDrag(event)">
                </div>
            </div>
        </div>
    </div>
    <div class="player2-container position-absolute top-50 end-0 translate-middle-y ">
        <div class="boot-container">
            <h2 class="player-text">Player 2</h2>
            <div class="boot-group">
                <div class="boot1">
                    <img class="draggable-boat" id="b1" src="/img/new_ship_horizontal/ship-1-red.png" alt="boot-1-rot" draggable="true" ondragstart="allowDrag(event)">
                </div>
                <div class="boot2">
                    <img class="draggable-boat" id="b2" src="/img/new_ship_horizontal/ship-2-red-p1.png" alt="boot-2-rot"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="b2" src="/img/new_ship_horizontal/ship-2-red-p2.png" alt="boot-2-rot"  draggable="true" ondragstart="allowDrag(event)">
                </div>
                <div class="boot3">
                    <img class="draggable-boat" id="b3" src="/img/new_ship_horizontal/ship-3-red-p1.png" alt="boot-3-rot"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="b3" src="/img/new_ship_horizontal/ship-3-red-p2.png" alt="boot-3-rot"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="b3" src="/img/new_ship_horizontal/ship-3-red-p3.png" alt="boot-3-rot"  draggable="true" ondragstart="allowDrag(event)">
                </div>
                <div class="boot4">
                    <img class="draggable-boat" id="b4" src="/img/new_ship_horizontal/ship-4-red-p1.png" alt="boot-4-rot"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="b4" src="/img/new_ship_horizontal/ship-4-red-p2.png" alt="boot-4-rot"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="b4" src="/img/new_ship_horizontal/ship-4-red-p3.png" alt="boot-4-rot"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="b4" src="/img/new_ship_horizontal/ship-4-red-p4.png" alt="boot-4-rot"  draggable="true" ondragstart="allowDrag(event)">
                </div>
            </div>
        </div>
    </div>
    <div class="schussdiv">
        <span id="schusstext">Player <span id="schussplayer">Player 1</span> ist jetzt dran</span>
        <div class="input-group">
            <input required="" type="text" name="text" autocomplete="off" class="input">
            <label class="user-label">Bitte Formel fürs schießen eingeben</label>
        </div>
        <button class="schussbutton">
            <span>Schießen</span><i></i>
        </button>
    </div>
    <!--
    <div class="table-container position-absolute top-50 start-50 translate-middle">
        <div class="table-div" id="table" ondrop="handleDrop(event)" ondragover="handleDragOver(event)">
        <canvas id="bg-canvas" width="40%" height="40%"></canvas>
    </div>
    -->
    <div class="position-absolute top-50 start-50 translate-middle table-container">
        <div class="left-table">
            <div id="table-player1"></div>
            <canvas></canvas>
        </div>
        <div class="right-table">
            <div id="table-player2"></div>
            <canvas></canvas>
        </div>
    </div>
    <!--END-->

    <!--Footer-->
    <div>
        <footer>
            <div class="Game-Interface-Create">
                <div class="row justify-content-center" style="padding-bottom: 0.7em;">
                    <div class=" " style="width: 200px;">
                        <button class="footer-button footer" onclick="initializeBoard()"> 
                            <span> Start Game
                            </span>
                        </button>
                    </div>
                    <div class=" " style="width: 200px;">
                        <button class="footer-button footer" onclick="resetBoard()">
                            <span> Restart Game
                            </span>
                        </button>
                    </div>
                    <div class=" " style="width: 200px;">
                        <button class="footer footer-button" onclick="window.location.href='/index.html';">
                            <span> Back
                            </span>
                        </button>
                    </div>
                </div>
                
            </div>
        </footer>
    </div>
    <!--END-->

    <!-- Include the separate JavaScript file -->
    <script src="/js/main.js"></script>
    <script src="../assets/dist/js/bootstrap.bundle.min.js"></script>
    <!-- In Ihrer HTML-Datei nach den anderen Script-Tags hinzufügen -->
    <script>
        // Funktion, um das Ziehen eines Boots zu aktivieren
        function allowDrag(event) {
            // Änderung: Setze die ID des übergeordneten Containers
            event.dataTransfer.setData("text", event.target.parentElement.id);
        }
    
        // Funktion, um das Ablegen eines Boots zu behandeln
        function handleDrop(event) {
            event.preventDefault();
            var containerId = event.dataTransfer.getData("text");
            var targetTable = document.getElementById("table");
            var targetCell = event.target;
    
            // Prüfen, ob die Zielzelle gültig ist
            if (targetTable.contains(targetCell) && !targetCell.classList.contains("occupied")) {
                var draggedContainer = document.getElementById(containerId);
    
                // Änderung: Setze die Position des Containers
                draggedContainer.style.position = "absolute";
                draggedContainer.style.left = (event.clientX - draggedContainer.clientWidth / 2) + "px";
                draggedContainer.style.top = (event.clientY - draggedContainer.clientHeight / 2) + "px";
    
                // Änderung: Überprüfe, ob genügend Platz für zwei Zellen vorhanden ist
                var targetCellIndex = Array.from(targetTable.getElementsByTagName("td")).indexOf(targetCell);
                if (targetCellIndex < targetTable.getElementsByTagName("td").length - 1) {
                    var nextCell = targetTable.getElementsByTagName("td")[targetCellIndex + 1];
    
                    // Überprüfe, ob die nächste Zelle gültig ist
                    if (!nextCell.classList.contains("occupied")) {
                        // Füge den Container in die beiden Zellen ein und markiere sie als belegt
                        targetCell.appendChild(draggedContainer);
                        targetCell.classList.add("occupied");
                        nextCell.appendChild(draggedContainer.cloneNode(true));
                        nextCell.classList.add("occupied");
                    }
                }
            }
        }
    
        // Funktion, um das Standardverhalten des Browsers während des Drag-and-Drop-Vorgangs zu verhindern
        function handleDragOver(event) {
            event.preventDefault();
        }
    </script>
    

</body>
</html>
