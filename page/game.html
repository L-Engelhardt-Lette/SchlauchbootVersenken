<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/game-css.css">
    <link rel="stylesheet" href="/css/table.css">
    <link rel="stylesheet" href="/css/schiessen.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <title>Schlauchboot Versenken Game</title>
</head>
<body class="bg-img">
    <div id="canvas-container">
        <canvas id="schussCanvas"></canvas>
    </div>
    <!--TABLE-->
    <div class="player1-container position-absolute top-50 start-0 translate-middle-y">
        <div class="boot-container">
            <h2 class="player-text">Player 1</h2>
            <div class="boot-group">
                <div class="boot1">
                    <img class="draggable-boat" id="bb1" src="/img/new_ship_horizontal/ship-1-blue.png" alt="boot-1-blau" draggable="true" ondragstart="allowDrag(event)">
                </div>
                <div class="boot2" id="boat2Container" ondrop="handleDrop(event)" ondragover="handleDragOver(event)">
                    <img class="draggable-boat" id="bb2" src="/img/new_ship_horizontal/ship-2-blue-p1.png" alt="boot-2-blau" draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="bb2a" src="/img/new_ship_horizontal/ship-2-blue-p2.png" alt="boot-2-blau" draggable="true" ondragstart="allowDrag(event)">
                </div>
                <div class="boot3">
                    <img class="draggable-boat" id="bb3" src="/img/new_ship_horizontal/ship-3-blue-p1.png" alt="boot-3-blau"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="bb3a" src="/img/new_ship_horizontal/ship-3-blue-p2.png" alt="boot-3-blau"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="bb3b" src="/img/new_ship_horizontal/ship-3-blue-p3.png" alt="boot-3-blau"  draggable="true" ondragstart="allowDrag(event)">
                </div>
                <div class="boot4">
                    <img class="draggable-boat" id="bb4" src="/img/new_ship_horizontal/ship-4-blue-p1.png" alt="boot-4-blau"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="bb4a" src="/img/new_ship_horizontal/ship-4-blue-p2.png" alt="boot-4-blau"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="bb4b" src="/img/new_ship_horizontal/ship-4-blue-p3.png" alt="boot-4-blau"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="bb4c" src="/img/new_ship_horizontal/ship-4-blue-p4.png" alt="boot-4-blau"  draggable="true" ondragstart="allowDrag(event)">
                </div>
            </div>
        </div>
    </div>
    <div class="player2-container position-absolute top-50 end-0 translate-middle-y ">
        <div class="boot-container">
            <h2 class="player-text">Player 2</h2>
            <div class="boot-group">
                <div class="boot1">
                    <img class="draggable-boat" id="br1" src="/img/new_ship_horizontal/ship-1-red.png" alt="boot-1-rot" draggable="true" ondragstart="allowDrag(event)">
                </div>
                <div class="boot2">
                    <img class="draggable-boat" id="br2" src="/img/new_ship_horizontal/ship-2-red-p1.png" alt="boot-2-rot"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="br2a" src="/img/new_ship_horizontal/ship-2-red-p2.png" alt="boot-2-rot"  draggable="true" ondragstart="allowDrag(event)">
                </div>
                <div class="boot3">
                    <img class="draggable-boat" id="br3" src="/img/new_ship_horizontal/ship-3-red-p1.png" alt="boot-3-rot"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="br3a" src="/img/new_ship_horizontal/ship-3-red-p2.png" alt="boot-3-rot"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="br3b" src="/img/new_ship_horizontal/ship-3-red-p3.png" alt="boot-3-rot"  draggable="true" ondragstart="allowDrag(event)">
                </div>
                <div class="boot4">
                    <img class="draggable-boat" id="br4" src="/img/new_ship_horizontal/ship-4-red-p1.png" alt="boot-4-rot"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="br4a" src="/img/new_ship_horizontal/ship-4-red-p2.png" alt="boot-4-rot"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="br4b" src="/img/new_ship_horizontal/ship-4-red-p3.png" alt="boot-4-rot"  draggable="true" ondragstart="allowDrag(event)">
                    <img class="draggable-boat" id="br4c" src="/img/new_ship_horizontal/ship-4-red-p4.png" alt="boot-4-rot"  draggable="true" ondragstart="allowDrag(event)">
                </div>
            </div>
        </div>
    </div>
    <div class="schussdiv">
        <span id="schusstext">Player <span id="schussplayer">Player 1</span>ist jetzt dran</span>
        <div class="input-group">
            <input required="" type="text" name="text" autocomplete="off" class="input" id="schussFormel" placeholder="Formel eingeben">
            <label class="user-label">Bitte Formel fürs schießen eingeben</label>
        </div>
        <button class="schussbutton" onclick="fireShot()">
            <span>Schießen</span><i></i>
        </button>
    </div>
    <!--
    <div class="table-container position-absolute top-50 start-50 translate-middle">
        <div class="table-div" id="table" ondrop="handleDrop(event)" ondragover="handleDragOver(event)">
        <canvas id="bg-canvas" width="40%" height="40%"></canvas>
    </div>
    -->
    <div class="position-absolute top-50 start-50 translate-middle table-container">
        <div class="left-table">
            <div id="table-player1"></div>
            <canvas></canvas>
        </div>
        <div class="right-table">
            <div id="table-player2"></div>
            <canvas></canvas>
        </div>
    </div>
    <!--END-->

    <!--Footer-->
    <div>
        <footer>
            <div class="Game-Interface-Create">
                <div class="row justify-content-center" style="padding-bottom: 0.7em;">
                    <div class=" " style="width: 200px;">
                        <button class="footer-button footer" onclick="initializeBoard()"> 
                            <span> Start Game
                            </span>
                        </button>
                    </div>
                    <div class=" " style="width: 200px;">
                        <button class="footer-button footer" onclick="resetBoard()">
                            <span> Restart Game
                            </span>
                        </button>
                    </div>
                    <div class=" " style="width: 200px;">
                        <button class="footer footer-button" onclick="restart()">
                            <span> Back
                            </span>
                        </button>
                    </div>
                </div>
                
            </div>
        </footer>
    </div>
    <!--END-->

    <!-- Include the separate JavaScript file -->
    <script src="/js/main.js"></script>
    <script src="../assets/dist/js/bootstrap.bundle.min.js"></script>
    <!-- In Ihrer HTML-Datei nach den anderen Script-Tags hinzufügen -->
    <script>

        function restart() {
           
            var boats = document.getElementsByClassName("hide");
            //foreach boat in boats
            boats[0].classList.remove("hide");
            window.location.href='/index.html';
           

        }

        function allowDrag(event) {
            event.dataTransfer.setData("text", event.target.id);
            event.dataTransfer.setData("offsetX", event.offsetX);
        }
    
        function handleDrop(event) {
            event.preventDefault();
            var boatId = event.dataTransfer.getData("text");
            var offsetX = parseInt(event.dataTransfer.getData("offsetX"));
            var targetTable = document.getElementById("table");
            var targetCell = event.target;
    
            if (targetTable.contains(targetCell) && !targetCell.classList.contains("occupied")) {
                var draggedBoatPart = document.getElementById(boatId);
    
                // Füge das Bootteil in die Zelle ein und markiere sie als belegt
                targetCell.appendChild(draggedBoatPart);
                targetCell.classList.add("occupied");
    
                // Berücksichtige den Offset, um das Bootteil korrekt zu positionieren
                draggedBoatPart.style.left = (event.clientX - offsetX - targetCell.getBoundingClientRect().left) + "px";
            }
        }
    
        function handleDragOver(event) {
            event.preventDefault();
        }
    </script>
    
</body>
</html>
